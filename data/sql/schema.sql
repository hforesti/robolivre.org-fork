CREATE TABLE amigos (id_usuario_a BIGINT, id_usuario_b BIGINT, aceito INT UNSIGNED DEFAULT '0', data_solicitacao DATETIME NOT NULL, PRIMARY KEY(id_usuario_a, id_usuario_b)) ENGINE = INNODB;
CREATE TABLE comunidades (id_comunidade BIGINT AUTO_INCREMENT, id_tipo_conjunto INT UNSIGNED, id_conjunto BIGINT, nome VARCHAR(255), descricao TEXT, PRIMARY KEY(id_comunidade, id_tipo_conjunto, id_conjunto)) ENGINE = INNODB;
CREATE TABLE conjuntos (id_conjunto BIGINT AUTO_INCREMENT, id_tipo_conjunto INT UNSIGNED, id_usuario BIGINT NOT NULL, imagem_perfil VARCHAR(100), slug VARCHAR(100) NOT NULL, ultima_modificacao DATETIME NOT NULL, data_criacao DATETIME, PRIMARY KEY(id_conjunto, id_tipo_conjunto)) ENGINE = INNODB;
CREATE TABLE conteudos (id_conteudo BIGINT AUTO_INCREMENT, id_tipo_conjunto INT UNSIGNED, id_conjunto BIGINT, id_super_tipo INT UNSIGNED NOT NULL, nome VARCHAR(100), descricao TEXT, enviar_email_criador INT UNSIGNED, nome_repositorio_github VARCHAR(100), tema_aula INT DEFAULT '0' NOT NULL, PRIMARY KEY(id_conteudo, id_tipo_conjunto, id_conjunto)) ENGINE = INNODB;
CREATE TABLE diarios_bordo (id_diario_bordo INT UNSIGNED AUTO_INCREMENT, id_conteudo BIGINT, id_conjunto BIGINT, id_tipo_conjunto INT UNSIGNED, id_usuario BIGINT NOT NULL, nome VARCHAR(255), descricao TEXT, PRIMARY KEY(id_diario_bordo, id_conteudo, id_conjunto, id_tipo_conjunto)) ENGINE = INNODB;
CREATE TABLE documentos (id_documento INT UNSIGNED AUTO_INCREMENT, id_usuario BIGINT, id_pasta INT UNSIGNED, nome_arquivo VARCHAR(255), is_codigo_fonte INT UNSIGNED, repositorio_github VARCHAR(255), ordenacao INT UNSIGNED, nome_documento VARCHAR(255), hits INT UNSIGNED DEFAULT '0' NOT NULL, PRIMARY KEY(id_documento, id_usuario, id_pasta)) ENGINE = INNODB;
CREATE TABLE imagens (id_imagem INT UNSIGNED AUTO_INCREMENT, id_usuario BIGINT, id_pasta INT UNSIGNED, nome_arquivo VARCHAR(100), ordenacao INT UNSIGNED, PRIMARY KEY(id_imagem, id_usuario, id_pasta)) ENGINE = INNODB;
CREATE TABLE logs_sistema (id_log_sistema BIGINT AUTO_INCREMENT, id_usuario BIGINT, descricao VARCHAR(255), parametros VARCHAR(255), tipo_log INT UNSIGNED, data_publicacao DATETIME, PRIMARY KEY(id_log_sistema, id_usuario)) ENGINE = INNODB;
CREATE TABLE mensagens (id_mensagem INT UNSIGNED AUTO_INCREMENT, id_usuario BIGINT, conteudo TEXT, PRIMARY KEY(id_mensagem, id_usuario)) ENGINE = INNODB;
CREATE TABLE mensagens_destinatarios (id_mensagem INT UNSIGNED, id_usuario_destinatario BIGINT, id_usuario_remetente BIGINT, PRIMARY KEY(id_mensagem, id_usuario_destinatario, id_usuario_remetente)) ENGINE = INNODB;
CREATE TABLE participantes_conjuntos (id_usuario BIGINT, id_conjunto BIGINT, id_tipo_conjunto INT UNSIGNED, id_tipo_permissao_conjunto INT UNSIGNED, aceito INT DEFAULT '1' NOT NULL, PRIMARY KEY(id_usuario, id_conjunto, id_tipo_conjunto, id_tipo_permissao_conjunto)) ENGINE = INNODB;
CREATE TABLE pastas (id_pasta INT UNSIGNED AUTO_INCREMENT, id_usuario BIGINT, id_tipo_conjunto INT UNSIGNED, id_conjunto BIGINT, nome VARCHAR(100), descricao VARCHAR(255), tipo_pasta INT NOT NULL, PRIMARY KEY(id_pasta, id_usuario)) ENGINE = INNODB;
CREATE TABLE projetos_comunidades (id_conjunto_comunidade BIGINT, id_tipo_conjunto_comunidade INT UNSIGNED, id_comunidade BIGINT, id_conjunto_conteudo BIGINT, id_tipo_conjunto_conteudo INT UNSIGNED, id_conteudo BIGINT, PRIMARY KEY(id_conjunto_comunidade, id_tipo_conjunto_comunidade, id_comunidade, id_conjunto_conteudo, id_tipo_conjunto_conteudo, id_conteudo)) ENGINE = INNODB;
CREATE TABLE publicacoes (id_publicacao BIGINT AUTO_INCREMENT, id_usuario BIGINT, id_conteudo BIGINT, id_tipo_conjunto INT UNSIGNED, id_conjunto BIGINT, id_diario_bordo INT UNSIGNED, id_pasta INT UNSIGNED, id_video INT UNSIGNED, id_imagem INT UNSIGNED, id_usuario_original BIGINT, id_publicacao_original BIGINT, id_usuario_referencia BIGINT, comentario TEXT, link TEXT, data_publicacao DATETIME NOT NULL, visivel INT UNSIGNED DEFAULT '1' NOT NULL, tipo_publicacao INT DEFAULT '0', privacidade_publicacao INT UNSIGNED DEFAULT '1', PRIMARY KEY(id_publicacao, id_usuario)) ENGINE = INNODB;
CREATE TABLE super_tipos (id_super_tipo INT UNSIGNED AUTO_INCREMENT, nome VARCHAR(45), descricao VARCHAR(255), PRIMARY KEY(id_super_tipo)) ENGINE = INNODB;
CREATE TABLE tags_conteudos (id_conteudo_referencia BIGINT, id_conjunto_referencia BIGINT, id_tipo_conjunto_referencia INT UNSIGNED, id_tag_conteudo BIGINT AUTO_INCREMENT, id_conteudo_referenciado BIGINT NOT NULL, id_conjunto_referenciado BIGINT NOT NULL, id_tipo_conjunto_referenciado INT UNSIGNED NOT NULL, nome_conteudo_inexistente VARCHAR(255), PRIMARY KEY(id_conteudo_referencia, id_conjunto_referencia, id_tipo_conjunto_referencia, id_tag_conteudo)) ENGINE = INNODB;
CREATE TABLE tipos_conjuntos (id_tipo_conjunto INT UNSIGNED AUTO_INCREMENT, nome VARCHAR(255), descricao VARCHAR(255), PRIMARY KEY(id_tipo_conjunto)) ENGINE = INNODB;
CREATE TABLE tipos_permissoes_conjuntos (id_tipo_permissao_conjunto INT UNSIGNED AUTO_INCREMENT, id_tipo_conjunto INT UNSIGNED, nome VARCHAR(45), descricao VARCHAR(255), PRIMARY KEY(id_tipo_permissao_conjunto, id_tipo_conjunto)) ENGINE = INNODB;
CREATE TABLE usuarios (id_usuario BIGINT AUTO_INCREMENT, nivel_escolaridade INT UNSIGNED, nome VARCHAR(255) NOT NULL, login VARCHAR(45) NOT NULL, senha VARCHAR(255) NOT NULL, email VARCHAR(100), endereco VARCHAR(255), habilidades TEXT, curso VARCHAR(100), site VARCHAR(100), site_empresa VARCHAR(100), data_nascimento DATE, sexo INT UNSIGNED, administrador INT UNSIGNED DEFAULT '0', sobre_mim TEXT, ativo INT UNSIGNED DEFAULT '1', imagem_perfil VARCHAR(100), twitter VARCHAR(100), parametros_email VARCHAR(100), aula_robolivre INT UNSIGNED DEFAULT '0', profissao VARCHAR(50), escola VARCHAR(100), empresa VARCHAR(50), data_criacao_perfil DATETIME NOT NULL, token VARCHAR(20), PRIMARY KEY(id_usuario)) ENGINE = INNODB;
CREATE TABLE videos (id_video INT UNSIGNED AUTO_INCREMENT, id_usuario BIGINT, id_pasta INT UNSIGNED, nome_arquivo VARCHAR(255), ordenacao INT UNSIGNED, link_video VARCHAR(255), PRIMARY KEY(id_video, id_usuario, id_pasta)) ENGINE = INNODB;
